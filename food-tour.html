<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Food Tour</title>

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <style>
    body {
      margin: 0;
      font-family: 'Trebuchet MS', sans-serif;
      color: white;
      text-align: center;
      min-height: 100vh;
      background: url('food.jpeg') no-repeat center center fixed;
      background-size: cover;
      background-color: #000;
    }

    #map {
      width: 80%;
      max-width: 100%;
      height: 500px;
      margin: 0 auto 20px;
      border: 5px solid #bb8e1e;
      box-shadow: 0 0 20px #a2802b;
      border-radius: 10px;
    }

    img[alt="Food Tour"] {
      width: 100%;
      max-height: 200px;
      object-fit: contain;
      display: block;
      margin: 0 auto 10px;
    }
/* Añade esto a tu <style> */
.bottom-buttons {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin: 30px auto;
  flex-wrap: wrap;
}

.bottom-buttons button {
  background-color: #ff9933;
  color: white;
  border: none;
  padding: 12px 20px;
  font-size: 16px;
  border-radius: 8px;
  cursor: pointer;
  transition: background-color 0.3s;
}

.bottom-buttons button:hover {
  background-color: #ffad4d;
}  
    
  </style>
</head>

<body>

  <img src="titlefood.png" alt="Food Tour">
  <div id="map"></div>

<!-- Botones -->
<div class="bottom-buttons">
  <button id="btnRecom">Recomendations</button>
  <button id="btnStreet">Street Food</button>
  <button id="btnHalibut">Halibut</button>
</div>

<!-- Script de Leaflet + JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const map = L.map('map').setView([61.2176, -149.8997], 14);

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors'
  }).addTo(map);

  let userMarker = null;
  function updatePosition(position) {
    const lat = position.coords.latitude;
    const lon = position.coords.longitude;

    if (userMarker) {
      userMarker.setLatLng([lat, lon]);
    } else {
      userMarker = L.circleMarker([lat, lon], {
        radius: 8,
        fillColor: "#f03",
        color: "#900",
        weight: 2,
        opacity: 1,
        fillOpacity: 0.8
      }).addTo(map).bindPopup("You Are Here!").openPopup();

      map.setView([lat, lon], 15);
    }
  }

  if ("geolocation" in navigator) {
    navigator.geolocation.watchPosition(updatePosition, console.warn, {
      enableHighAccuracy: true,
      maximumAge: 10000,
      timeout: 10000
    });
  }

  // ==============================
  // Marcadores fijos por categoría
  // ==============================

  const categories = {
    Recom: {
      color: "yellow",
      coords: [
        [61.2181, -149.9003], // lugar 1
        [61.2170, -149.8930], // lugar 2
        [61.2195, -149.9050]  // lugar 3
      ]
    },
    Street: {
      color: "orange",
      coords: [
        [61.2160, -149.8990],
        [61.2175, -149.8910],
        [61.2155, -149.8965]
      ]
    },
    Halibut: {
      color: "purple",
      coords: [
        [61.2190, -149.8970],
        [61.2168, -149.9030],
        [61.2182, -149.8920]
      ]
    }
  };

  const markers = {
    Recom: [],
    Street: [],
    Halibut: []
  };

 function toggleMarkers(categoryKey) {
  const cat = categories[categoryKey];
  const currentMarkers = markers[categoryKey];

  if (currentMarkers.length > 0) {
    currentMarkers.forEach(m => map.removeLayer(m));
    markers[categoryKey] = [];
  } else {
    cat.coords.forEach((coord, index) => {
      const marker = L.circleMarker(coord, {
        radius: 8,
        color: cat.color,
        fillColor: cat.color,
        fillOpacity: 0.9
      }).addTo(map);

      marker.bindPopup(`Place${index + 1}`).openPopup();
      markers[categoryKey].push(marker);
    });
  }
}


  // Event listeners para botones
  document.getElementById("btnRecom").addEventListener("click", () => toggleMarkers("Recom"));
  document.getElementById("btnStreet").addEventListener("click", () => toggleMarkers("Street"));
  document.getElementById("btnHalibut").addEventListener("click", () => toggleMarkers("Halibut"));
});
</script>

</body>
</html>
